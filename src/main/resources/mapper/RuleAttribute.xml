<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gu.drools.mapper.RuleMakeMapper">

    <select id="findRuleByCode"   resultType="com.gu.drools.Vo.RuleShowVo">
        SELECT  *  FROM   (
                SELECT
                    a.id,
                    a.`code`,
                    a.decision_row_name,
                    a.decision_table_name,
                    a.datatable_source,
                    a.code_version,
                    a.sql_info,
                    a.perform_type,
                    a.audit_idea,
                    a.node,
                    b.predefined_description,
                    b.when_description,
                    b.when_experssion,
                    b.when_special_experssion,
                    b.then_desctiption,
                    b.then_experssion
                FROM
                    rule_main a,
                    rule_element b
                WHERE
                    a.id = b.rule_id
                  AND a.`code` = #{code}
                  AND a.perform_type = #{performType}
            ) p
                LEFT JOIN rule_data c ON p.id = c.rule_id
    </select>
</mapper>